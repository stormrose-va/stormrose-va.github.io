(function(){"use strict";var e={4235:function(e,t,o){o.r(t)},7101:function(e,t,o){var r=o(9963),a=o(6252);const n={class:"container"};function s(e,t,o,s,i,c){const u=(0,a.up)("the-header-no-menu"),h=(0,a.up)("router-view"),d=(0,a.up)("the-footer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(u),(0,a._)("div",n,[(0,a.Wm)(h,null,{default:(0,a.w5)((e=>[(0,a.Wm)(r.uT,{name:"route",mode:"out-in"},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(e.Component)))])),_:2},1024)])),_:1})]),(0,a.Wm)(d)],64)}var i="data:image/png;base64,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";const c=(0,a.uE)('<section class="hero is-primary"><div class="hero-body"><div class="container has-text-centered"><p class="title"><img src="'+i+'" alt="Stormrose Logo"></p><p class="subtitle"> Aircraft Leasing </p></div></div></section>',1),u=[c];function h(e,t,o,r,n,s){return(0,a.wg)(),(0,a.iD)("header",null,u)}var d={name:"TheHeaderNoMenu",data(){return{navbarActive:!1}}},l=o(3744);const f=(0,l.Z)(d,[["render",h]]);var m=f;const p={class:"footer"},g={class:"content has-text-centered"},w=(0,a._)("p",null,[(0,a._)("strong",null,"Stormrose"),(0,a.Uk)(" is a virtual aircraft leasing company based on "),(0,a._)("a",{href:"https://www.fseconomy.net/"},"FSEconomy"),(0,a.Uk)(", an economy simulation game for flight simulators. ")],-1),y=(0,a.Uk)("Legal Information"),b=(0,a.Uk)(" | "),k=(0,a.Uk)("Privacy Policy");function v(e,t){const o=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("footer",p,[(0,a._)("div",g,[w,(0,a._)("p",null,[(0,a.Wm)(o,{to:"/legal"},{default:(0,a.w5)((()=>[y])),_:1}),b,(0,a.Wm)(o,{to:"/privacy"},{default:(0,a.w5)((()=>[k])),_:1})])])])}const A={},T=(0,l.Z)(A,[["render",v]]);var P=T,j={name:"App",components:{TheHeaderNoMenu:m,TheFooter:P},computed:{didAutoLogout(){return this.$store.getters["auth/didAutoLogout"]}},watch:{didAutoLogout(e,t){e&&e!==t&&this.$router.replace("/aircraft")}},created(){this.$store.dispatch("auth/autoLogin")}};const O=(0,l.Z)(j,[["render",s]]);var I=O,R=o(3907),F={aircraft(e){return e.aircraft},hasAircraft(e){return e.aircraft&&e.aircraft.length>0},shouldUpdate(e){const t=e.lastFetch;if(!t)return!0;const o=(new Date).getTime();return(o-t)/1e3>60}},S={setAircraft(e,t){e.aircraft=t},setFetchTimestamp(e){e.lastFetch=(new Date).getTime()}},E=(o(1703),{async loadAircraft(e,t){if(!t.forceRefresh&&!e.getters.shouldUpdate)return;const o=await fetch("https://stormrose-backend.herokuapp.com/leasing/aircraft/",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}),r=await o.json();if(!o.ok)throw new Error(r.message||"Failed to fetch aircraft data!");e.commit("setAircraft",r),e.commit("setFetchTimestamp")},async submitLeaseRequest(e,t){const o=e.rootGetters["auth/token"],r="https://stormrose-backend.herokuapp.com/leasing/reserve/",a=await fetch(r,{method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({aircraft:t.aircraft,target:t.target})}),n=await a.json();if(!a.ok||"ko"===n.status){const e=n.message||"Failed to reserve aircraft";throw new Error(e)}}}),x={namespaced:!0,state(){return{lastFetch:null,aircraft:[]}},getters:F,mutations:S,actions:E},H={isAuthenticated(e){return!!e.username&&!!e.accessToken&&!!e.refreshToken},refreshToken(e){return e.refreshToken},didAutoLogout(e){return e.didAutoLogout},username(e){return e.username},token(e){return e.accessToken},profile(e){return e.profile},hasProfile(e){return!!e.profile},targets(e,t){let o=[];if(!t.isAuthenticated)return o;if(o.push(e.username),!t.hasProfile)return o;for(const r of e.profile.groups)o.push(r);return o},verifiedGroups(e,t){return t.isAuthenticated&&t.hasProfile?e.profile.groups.filter((e=>e.verified)):[]},isVerified(e){return!!e.profile&&e.profile.verified},wantsNotify(e){return!!e.profile&&e.profile.notify}},C={setUser(e,t){e.username=t.username,e.accessToken=t.access,e.refreshToken=t.refresh,e.didAutoLogout=!1},updateToken(e,t){e.accessToken=t.access},unsetUser(e){e.username=null,e.accessToken=null,e.refreshToken=null,e.profile=null,e.didAutoLogout=!1},setAutoLogout(e){e.didAutoLogout=!0},setProfile(e,t){e.profile=t}};const L=299990,N=86399900;let G,q;var z={async login(e,t){const o="https://stormrose-backend.herokuapp.com/api/token/",r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,password:t.password})}),a=await r.json();if(!r.ok){const e=a.detail||"Failed to authenticate!";throw new Error(e)}const n=(new Date).getTime()+N;localStorage.setItem("username",t.username),localStorage.setItem("refreshToken",a.refresh),localStorage.setItem("refreshTokenExpiration",n),G=setTimeout((()=>{e.dispatch("autoRefresh")}),L),e.commit("setUser",{username:t.username,...a}),await e.dispatch("getProfile")},async autoRefresh(e){const t="https://stormrose-backend.herokuapp.com/api/token/refresh/",o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e.getters.refreshToken})}),r=await o.json();if(!o.ok)throw new Error(r.message||"Failed to refresh authentication!");clearTimeout(G),G=setTimeout((()=>{e.dispatch("autoRefresh")}),L),e.commit("updateToken",r)},logout(e){localStorage.removeItem("username"),localStorage.removeItem("refreshToken"),localStorage.removeItem("refreshTokenExpiration"),clearTimeout(G),clearTimeout(q),e.commit("unsetUser")},async autoLogin(e){const t=localStorage.getItem("username"),o=localStorage.getItem("refreshToken"),r=localStorage.getItem("refreshTokenExpiration");if(!t||!o||!r)return;const a=+r-(new Date).getTime();a<0||(q=setTimeout((()=>{e.dispatch("autoLogout")}),a),e.commit("setUser",{username:t,access:null,refresh:o}),await e.dispatch("autoRefresh"),await e.dispatch("getProfile"))},async autoLogout(e){await e.dispatch("logout"),e.commit("setAutoLogout")},async register(e,t){const o="https://stormrose-backend.herokuapp.com/account/register/",r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,email:t.email})}),a=await r.json();if(!r.ok||"ko"===a.status){const e=a.message||"Failed to register!";throw new Error(e)}},async getProfile(e){const t=e.getters.token,o="https://stormrose-backend.herokuapp.com/account/",r=await fetch(o,{method:"GET",headers:{Authorization:"Bearer "+t}}),a=await r.json();if(!r.ok||"ko"===a.status){const e=a.message||"Failed to retrieve profile";throw new Error(e)}e.commit("setProfile",a.data)},async verifyProfile(e){const t=e.getters.token,o="https://stormrose-backend.herokuapp.com/account/verify/",r=await fetch(o,{method:"GET",headers:{Authorization:"Bearer "+t}}),a=await r.json();if(!r.ok||"ko"===a.status){const e=a.message||"Failed to verify account";throw new Error(e)}await e.dispatch("getProfile")},async changePassword(e,t){const o=e.getters.token,r="https://stormrose-backend.herokuapp.com/account/password/",a=await fetch(r,{method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({old_password:t.currentPassword,new_password:t.newPassword})}),n=await a.json();if(!a.ok||"ko"===n.status){const e=n.message||"Failed to change password";throw new Error(e)}},async changeEmail(e,t){const o=e.getters.token,r="https://stormrose-backend.herokuapp.com/account/email/",a=await fetch(r,{method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({old_email:t.currentEmail,new_email:t.newEmail})}),n=await a.json();if(!a.ok||"ko"===n.status){const e=n.message||"Failed to update email address";throw new Error(e)}await e.dispatch("getProfile")},async addGroup(e,t){const o=e.getters.token,r="https://stormrose-backend.herokuapp.com/account/group/add/",a=await fetch(r,{method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({group:t.groupName})}),n=await a.json();if(!a.ok||"ko"===n.status){const e=n.message||`Failed to add group ${t.groupName} to account`;throw new Error(e)}await e.dispatch("getProfile")},async verifyGroups(e){const t=e.getters.token,o="https://stormrose-backend.herokuapp.com/account/group/verify/",r=await fetch(o,{method:"GET",headers:{Authorization:"Bearer "+t}}),a=await r.json();if(!r.ok||"ko"===a.status){const e=a.message||"Failed to verify groups";throw new Error(e)}await e.dispatch("getProfile")},async toggleNotify(e){const t=e.getters.wantsNotify,o=t?"unsubscribe":"subscribe",r="https://stormrose-backend.herokuapp.com/account/notify/",a=e.getters.token,n=await fetch(r,{method:"POST",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},body:JSON.stringify({action:o})}),s=await n.json();if(!n.ok||"ko"===s.status){const e=s.message||`Failed to ${o} to/from notification emails`;throw new Error(e)}await e.dispatch("getProfile")},async passwordResetRequest(e,t){const o="https://stormrose-backend.herokuapp.com/account/password/reset/",r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,email:t.email})}),a=await r.json();if(!r.ok||"ko"===a.status){const e=a.message||"Failed to initiate password reset!";throw new Error(e)}},async passwordResetConfirm(e,t){const o="https://stormrose-backend.herokuapp.com/account/password/reset/confirm/",r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,token:t.token,password:t.password})}),a=await r.json();if(!r.ok||"ko"===a.status){const e=a.message||"Failed to complete password reset!";throw new Error(e)}}},D={namespaced:!0,state(){return{username:null,accessToken:null,refreshToken:null,didAutoLogout:!1,profile:null}},getters:H,mutations:C,actions:z},Z={shouldUpdate(e){const t=e.lastFetch;if(!t)return!0;const o=(new Date).getTime();return(o-t)/1e3>60},contracts(e){return e.contracts},hasContracts(e){return e.contracts&&e.contracts.length>0},pendingContracts(e){return e.contracts&&e.contracts.length>0?e.contracts.filter((e=>!e.paid_until&&"A"===e.status)):[]},activeContracts(e){return e.contracts&&e.contracts.length>0?e.contracts.filter((e=>!!e.paid_until&&"A"===e.status)):[]},closedContracts(e){return e.contracts&&e.contracts.length>0?e.contracts.filter((e=>"C"===e.status)):[]},hasPendingContracts(e){if(e.contracts&&e.contracts.length>0){const t=e.contracts.filter((e=>!e.paid_until&&"A"===e.status));return t.length>0}return!1},hasActiveContracts(e){if(e.contracts&&e.contracts.length>0){const t=e.contracts.filter((e=>!!e.paid_until&&"A"===e.status));return t.length>0}return!1},hasClosedContracts(e){if(e.contracts&&e.contracts.length>0){const t=e.contracts.filter((e=>"C"===e.status));return t.length>0}return!1}},Y={setContracts(e,t){e.contracts=t},setFetchTimestamp(e){e.lastFetch=(new Date).getTime()}},B={async loadContracts(e,t){if(!t.forceRefresh&&!e.getters.shouldUpdate)return;let o=e.rootGetters["auth/token"],r=0;while(!o&&r<3)await new Promise((e=>setTimeout(e,500))),o=e.rootGetters["auth/token"],r++;if(!o)throw new Error("Unable to retrieve authentication token");const a="https://stormrose-backend.herokuapp.com/leasing/contracts/",n=await fetch(a,{method:"GET",mode:"cors",headers:{Authorization:"Bearer "+o}}),s=await n.json();if(!n.ok){const e=s.message||"Failed to retrieve contracts";throw new Error(e)}e.commit("setContracts",s),e.commit("setFetchTimestamp")},async refreshPayments(e){let t=e.rootGetters["auth/token"],o=0;while(!t&&o<3)await new Promise((e=>setTimeout(e,500))),t=e.rootGetters["auth/token"],o++;if(!t)throw new Error("Unable to retrieve authentication token");const r="https://stormrose-backend.herokuapp.com/leasing/verify/",a=await fetch(r,{method:"GET",mode:"cors",headers:{Authorization:"Bearer "+t}}),n=await a.json();if(!a.ok||"ko"===n.status){const e=n.message||"Failed to verify account";throw new Error(e)}await e.dispatch("loadContracts",{forceRefresh:!0})}},Q={namespaced:!0,state(){return{contracts:[],lastFetch:null}},getters:Z,mutations:Y,actions:B};const U=(0,R.MT)({modules:{aircraft:x,auth:D,contracts:Q}});var W=U,J=o(2119);const V=()=>Promise.all([o.e(974),o.e(972)]).then(o.bind(o,2079)),K=()=>Promise.all([o.e(974),o.e(978)]).then(o.bind(o,4301)),X=()=>Promise.all([o.e(974),o.e(856)]).then(o.bind(o,4642)),M=()=>Promise.all([o.e(974),o.e(742)]).then(o.bind(o,6647)),_=()=>Promise.all([o.e(974),o.e(952)]).then(o.bind(o,7841)),$=()=>Promise.all([o.e(974),o.e(207)]).then(o.bind(o,7880)),ee=()=>Promise.all([o.e(974),o.e(785)]).then(o.bind(o,3671)),te=()=>o.e(758).then(o.bind(o,5758)),oe=()=>o.e(389).then(o.bind(o,6389)),re=()=>o.e(850).then(o.bind(o,850)),ae=()=>o.e(397).then(o.bind(o,397)),ne=()=>o.e(338).then(o.bind(o,3338)),se=(0,J.p7)({history:(0,J.PO)(),routes:[{path:"/",component:ne},{name:"aircraft",path:"/aircraft",component:V},{name:"login",path:"/login",component:K},{name:"signup",path:"/signup",component:X},{name:"password",path:"/password/:token?",props:!0,component:M},{name:"account",path:"/account",component:_},{name:"groups",path:"/groups",component:$},{name:"contracts",path:"/contracts",component:ee},{name:"about",path:"/about",component:te},{name:"terms",path:"/terms",component:oe},{name:"legal",path:"/legal",component:re},{name:"privacy",path:"/privacy",component:ae}],linkExactActiveClass:"is-active"});var ie=se;o(4235);const ce=(0,r.ri)(I);ce.use(W),ce.use(ie),ce.mount("#app")}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,a,n){if(!r){var s=1/0;for(h=0;h<e.length;h++){r=e[h][0],a=e[h][1],n=e[h][2];for(var i=!0,c=0;c<r.length;c++)(!1&n||s>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[c])}))?r.splice(c--,1):(i=!1,n<s&&(s=n));if(i){e.splice(h--,1);var u=a();void 0!==u&&(t=u)}}return t}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[r,a,n]}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,r){return o.f[r](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{207:"c32ee1ae",338:"18ab0fec",389:"7c5e8609",397:"6f508678",742:"78f56c59",758:"ba9da164",785:"5ecee0dd",850:"102fe281",856:"63dedb73",952:"ac42556c",972:"b00c8c4e",974:"8ee3ead5",978:"8840cb8a"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{207:"d6d0ab62",742:"d6d0ab62",785:"d6d0ab62",856:"d6d0ab62",952:"d6d0ab62",972:"6bf59306",978:"92e30592"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="frontend:";o.l=function(r,a,n,s){if(e[r])e[r].push(a);else{var i,c;if(void 0!==n)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var d=u[h];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+n){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",t+n),i.src=r),e[r]=[a];var l=function(t,o){i.onerror=i.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(o)})),t)return t(o)},f=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e=function(e,t,o,r){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var n=function(n){if(a.onerror=a.onload=null,"load"===n.type)o();else{var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=i,a.parentNode.removeChild(a),r(c)}};return a.onerror=a.onload=n,a.href=t,document.head.appendChild(a),a},t=function(e,t){for(var o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var a=o[r],n=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(n===e||n===t))return a}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){a=s[r],n=a.getAttribute("data-href");if(n===e||n===t)return a}},r=function(r){return new Promise((function(a,n){var s=o.miniCssF(r),i=o.p+s;if(t(s,i))return a();e(r,i,a,n)}))},a={143:0};o.f.miniCss=function(e,t){var o={207:1,742:1,785:1,856:1,952:1,972:1,978:1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=r(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}(),function(){var e={143:0};o.f.j=function(t,r){var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var n=new Promise((function(o,r){a=e[t]=[o,r]}));r.push(a[2]=n);var s=o.p+o.u(t),i=new Error,c=function(r){if(o.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var n=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",i.name="ChunkLoadError",i.type=n,i.request=s,a[1](i)}};o.l(s,c,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,n,s=r[0],i=r[1],c=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(c)var h=c(o)}for(t&&t(r);u<s.length;u++)n=s[u],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(h)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(7101)}));r=o.O(r)})();
//# sourceMappingURL=app.998bb8d5.js.map