"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[952],{1773:function(s,e,i){i.d(e,{Z:function(){return h}});var a=i(6252),o=i(3577);const t={class:"modal-content"},l={class:"message-header"},r={class:"message-body"};function n(s,e,i,n,c,d){return(0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a._)("div",{class:(0,o.C_)(["modal",{"is-active":i.show}])},[(0,a._)("div",{class:"modal-background",onClick:e[0]||(e[0]=(...s)=>d.signalClose&&d.signalClose(...s))}),(0,a._)("div",t,[(0,a._)("article",{class:(0,o.C_)(["message",i.color])},[(0,a._)("div",l,[(0,a.WI)(s.$slots,"header",{},(()=>[(0,a._)("p",null,(0,o.zw)(i.title),1)])),(0,a._)("button",{class:"delete","aria-label":"delete",onClick:e[1]||(e[1]=(...s)=>d.signalClose&&d.signalClose(...s))})]),(0,a._)("div",r,[(0,a.WI)(s.$slots,"default")])],2)]),(0,a._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[2]||(e[2]=(...s)=>d.signalClose&&d.signalClose(...s))})],2)])}var c={name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},color:{type:String,required:!1,default:null}},emits:["close"],methods:{signalClose(){this.$emit("close")}}},d=i(3744);const u=(0,d.Z)(c,[["render",n]]);var h=u},7841:function(s,e,i){i.r(e),i.d(e,{default:function(){return _e}});var a=i(6252);const o={class:"section"},t={class:"container"};function l(s,e,i,l,r,n){const c=(0,a.up)("account-verify"),d=(0,a.up)("account-password"),u=(0,a.up)("account-email"),h=(0,a.up)("account-notify");return(0,a.wg)(),(0,a.iD)("section",o,[(0,a._)("div",t,[(0,a.Wm)(c,{class:"mb-6"}),(0,a.Wm)(d,{class:"mb-6"}),(0,a.Wm)(u,{class:"mb-6"}),(0,a.Wm)(h)])])}var r=i(3577),n=i(6920);const c={key:0},d=(0,a.Uk)(" Congratulations, your account has been verified. You can now use Stormrose to its full extend. "),u={key:1,class:"card"},h=(0,a._)("div",{class:"card-header"},[(0,a._)("p",{class:"card-header-title"}," Account Verification ")],-1),m={class:"card-content content"},p=(0,a.uE)('<p> Your account has not yet been verified. Stormrose uses micro payments within the <a href="https://server.fseconomy.net/">FSEconomy Game World</a> to verify accounts. Please check your <a href="https://server.fseconomy.net/paymentlog.jsp">Payment Log</a> for such a micro payment. It was sent when your account was registered, and should look like this: </p><figure class="image"><img src="'+n+'" alt="payment illustration"></figure><p> Please use the FSEconomy Game World <a href="https://server.fseconomy.net/banksummary.jsp">banking page</a> to return this micro payment to the group it came from. This is part of an automated process so please: </p><ul><li>send it back in one transaction &amp; make sure the amount is correct</li><li>select the destination group from the drop-down list that appears when you start typing the name</li><li>include the verification token (alphanumeric token provided in the “Comments” field) in the Comments field. </li></ul><p> Once the transaction is completed, use the button below to confirm the transaction and complete the verification process. </p>',5),f={key:2,class:"card"},w=(0,a._)("div",{class:"card-header"},[(0,a._)("p",{class:"card-header-title"}," Account Status ")],-1),v={class:"card-content content"},k={class:"icon has-text-success"},y=(0,a.Uk)(" "),g=(0,a.Uk)("  Your account has been verified. ");function _(s,e,i,o,t,l){const n=(0,a.up)("base-spinner"),_=(0,a.up)("base-modal"),b=(0,a.up)("svg-icon");return(0,a.wg)(),(0,a.iD)("section",null,[t.isLoading?((0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(n)])):(0,a.kq)("",!0),(0,a.Wm)(_,{show:!!t.error,color:"is-danger",title:"Verification Error",onClose:l.handleError},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.error),1)])),_:1},8,["show","onClose"]),(0,a.Wm)(_,{show:t.success,color:"is-success",title:"Verification Succeeded",onClose:l.handleSuccess},{default:(0,a.w5)((()=>[d])),_:1},8,["show","onClose"]),l.accountIsVerified?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",u,[h,(0,a._)("div",m,[p,(0,a._)("button",{class:"button is-primary",onClick:e[0]||(e[0]=(...s)=>l.doVerify&&l.doVerify(...s))},"Complete Verification")])])),l.accountIsVerified?((0,a.wg)(),(0,a.iD)("div",f,[w,(0,a._)("div",v,[(0,a._)("p",null,[(0,a._)("span",k,[(0,a.Wm)(b,{type:"mdi",path:l.tick,size:24},{default:(0,a.w5)((()=>[y])),_:1},8,["path"])]),g])])])):(0,a.kq)("",!0)])}var b=i(5422),P=i(1773),E=i(2273),C=i(5317),S={name:"AccountVerify",components:{BaseSpinner:b.Z,BaseModal:P.Z,SvgIcon:E.Z},computed:{accountIsVerified(){return this.$store.getters["auth/isVerified"]},tick(){return C.cse}},data(){return{isLoading:!1,error:null,success:!1}},methods:{handleError(){this.error=null},handleSuccess(){this.success=!1},async doVerify(){this.isLoading=!0;try{await this.$store.dispatch("auth/verifyProfile"),this.success=!0}catch(s){this.error=s.message||"Failed to verify your account, try later."}this.isLoading=!1}}},V=i(3744);const N=(0,V.Z)(S,[["render",_]]);var W=N,I=i(9963);const U={key:0},D=["innerHTML"],q=(0,a.Uk)(" Your password has been changed. "),L={class:"card"},Z=(0,a._)("div",{class:"card-header"},[(0,a._)("p",{class:"card-header-title"}," Change Password ")],-1),x={class:"card-content content"},z={class:"field is-horizontal"},M=(0,a._)("div",{class:"field-label is-normal"},[(0,a._)("label",{class:"label",for:"currentPassword"},"Current Password")],-1),A={class:"field-body"},$={class:"field"},B={class:"control is-expanded has-icons-left"},F={class:"icon is-small is-left"},Y=(0,a.Uk)(" "),K={class:"field is-horizontal"},T=(0,a._)("div",{class:"field-label is-normal"},[(0,a._)("label",{class:"label",for:"newPassword"},"New Password")],-1),j={class:"field-body"},G={class:"field"},H={class:"control is-expanded has-icons-left"},O={class:"icon is-small is-left"},R=(0,a.Uk)(" "),J={key:0,class:"help is-danger"},Q={key:1,class:"help is-success"},X={class:"field is-horizontal"},ss=(0,a._)("div",{class:"field-label is-normal"},[(0,a._)("label",{class:"label",for:"confirmPassword"},"Confirm New Password")],-1),es={class:"field-body"},is={class:"field"},as={class:"control is-expanded has-icons-left"},os={class:"icon is-small is-left"},ts=(0,a.Uk)(" "),ls={key:0,class:"help is-danger"},rs={key:1,class:"help is-success"},ns={class:"field is-horizontal"},cs=(0,a._)("div",{class:"field-label"},null,-1),ds={class:"field-body"},us={class:"field"},hs={key:0,class:"message is-danger"},ms=(0,a._)("div",{class:"message-body"}," Please make sure to enter a password in all three fields. Neither of them can be empty. ",-1),ps=[ms],fs=(0,a.uE)('<div class="field is-horizontal"><div class="field-label"></div><div class="field-body"><div class="field"><div class="control"><button class="button is-primary">Submit</button></div></div></div></div>',1);function ws(s,e,i,o,t,l){const n=(0,a.up)("base-spinner"),c=(0,a.up)("base-modal"),d=(0,a.up)("svg-icon");return(0,a.wg)(),(0,a.iD)("section",null,[t.isLoading?((0,a.wg)(),(0,a.iD)("div",U,[(0,a.Wm)(n)])):(0,a.kq)("",!0),(0,a.Wm)(c,{show:!!t.error,color:"is-danger",title:"New Password Error",onClose:l.handleError},{default:(0,a.w5)((()=>[(0,a._)("section",{innerHTML:t.error},null,8,D)])),_:1},8,["show","onClose"]),(0,a.Wm)(c,{show:t.success,color:"is-success",title:"New Password Succeeded",onClose:l.handleSuccess},{default:(0,a.w5)((()=>[q])),_:1},8,["show","onClose"]),(0,a._)("div",L,[Z,(0,a._)("div",x,[(0,a._)("form",{onSubmit:e[5]||(e[5]=(0,I.iM)(((...s)=>l.doSubmit&&l.doSubmit(...s)),["prevent"]))},[(0,a._)("div",z,[M,(0,a._)("div",A,[(0,a._)("div",$,[(0,a._)("div",B,[(0,a.wy)((0,a._)("input",{class:"input",id:"currentPassword",type:"password","onUpdate:modelValue":e[0]||(e[0]=s=>t.currentPassword=s)},null,512),[[I.nr,t.currentPassword,void 0,{trim:!0}]]),(0,a._)("span",F,[(0,a.Wm)(d,{type:"mdi",path:l.passwordIcon},{default:(0,a.w5)((()=>[Y])),_:1},8,["path"])])])])])]),(0,a._)("div",K,[T,(0,a._)("div",j,[(0,a._)("div",G,[(0,a._)("div",H,[(0,a.wy)((0,a._)("input",{class:(0,r.C_)(["input",{"is-danger":t.ko,"is-success":t.ok}]),id:"newPassword",type:"password","onUpdate:modelValue":e[1]||(e[1]=s=>t.newPassword=s),onKeyup:e[2]||(e[2]=(...s)=>l.checkNewPw&&l.checkNewPw(...s))},null,34),[[I.nr,t.newPassword,void 0,{trim:!0}]]),(0,a._)("span",O,[(0,a.Wm)(d,{type:"mdi",path:l.passwordIcon},{default:(0,a.w5)((()=>[R])),_:1},8,["path"])])]),t.ko?((0,a.wg)(),(0,a.iD)("p",J,"Passwords must match")):(0,a.kq)("",!0),t.ok?((0,a.wg)(),(0,a.iD)("p",Q,"Passwords do match")):(0,a.kq)("",!0)])])]),(0,a._)("div",X,[ss,(0,a._)("div",es,[(0,a._)("div",is,[(0,a._)("div",as,[(0,a.wy)((0,a._)("input",{class:(0,r.C_)(["input",{"is-danger":t.ko,"is-success":t.ok}]),id:"confirmPassword",type:"password","onUpdate:modelValue":e[3]||(e[3]=s=>t.confirmPassword=s),onKeyup:e[4]||(e[4]=(...s)=>l.checkNewPw&&l.checkNewPw(...s))},null,34),[[I.nr,t.confirmPassword,void 0,{trim:!0}]]),(0,a._)("span",os,[(0,a.Wm)(d,{type:"mdi",path:l.passwordIcon},{default:(0,a.w5)((()=>[ts])),_:1},8,["path"])])]),t.ko?((0,a.wg)(),(0,a.iD)("p",ls,"Passwords must match")):(0,a.kq)("",!0),t.ok?((0,a.wg)(),(0,a.iD)("p",rs,"Passwords do match")):(0,a.kq)("",!0)])])]),(0,a._)("div",ns,[cs,(0,a._)("div",ds,[(0,a._)("div",us,[t.formIsValid?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("article",hs,ps))])])]),fs],32)])])])}var vs={name:"AccountPassword",components:{BaseSpinner:b.Z,BaseModal:P.Z,SvgIcon:E.Z},computed:{passwordIcon(){return C.d5D}},data(){return{isLoading:!1,success:!1,error:null,currentPassword:"",newPassword:"",confirmPassword:"",formIsValid:!0,ko:!1,ok:!1}},methods:{handleError(){this.error=null},handleSuccess(){this.success=!1,this.currentPassword="",this.newPassword="",this.confirmPassword="",this.formIsValid=!0,this.ko=!1,this.ok=!1},checkNewPw(){""!==this.newPassword||""!==this.confirmPassword?this.newPassword===this.confirmPassword?(this.ko=!1,this.ok=!0):(this.ko=!0,this.ok=!1):(this.ko=!1,this.ok=!1)},async doSubmit(){if(""===this.currentPassword||""===this.newPassword||""===this.confirmPassword||this.newPassword!==this.confirmPassword)return void(this.formIsValid=!1);this.isLoading=!0;const s={currentPassword:this.currentPassword,newPassword:this.newPassword};try{await this.$store.dispatch("auth/changePassword",s),this.success=!0}catch(e){this.error=e.message||"Failed to change your password, try later."}this.isLoading=!1}}};const ks=(0,V.Z)(vs,[["render",ws]]);var ys=ks;const gs={key:0},_s=(0,a.Uk)(" Your email address has been changed. "),bs={class:"card"},Ps=(0,a._)("div",{class:"card-header"},[(0,a._)("p",{class:"card-header-title"}," Change Email Address ")],-1),Es={class:"card-content content"},Cs={class:"field is-horizontal"},Ss=(0,a._)("div",{class:"field-label is-normal"},[(0,a._)("label",{class:"label",for:"currentEmail"},"Current Email Address")],-1),Vs={class:"field-body"},Ns={class:"field"},Ws={class:"control is-expanded has-icons-left"},Is={class:"icon is-small is-left"},Us=(0,a.Uk)(" "),Ds={key:0,class:"help is-danger"},qs={key:1,class:"help is-success"},Ls={class:"field is-horizontal"},Zs=(0,a._)("div",{class:"field-label is-normal"},[(0,a._)("label",{class:"label",for:"newEmail"},"New Email Address")],-1),xs={class:"field-body"},zs={class:"field"},Ms={class:"control is-expanded has-icons-left"},As={class:"icon is-small is-left"},$s=(0,a.Uk)(" "),Bs={key:0,class:"help is-danger"},Fs={key:1,class:"help is-success"},Ys={class:"field is-horizontal"},Ks=(0,a._)("div",{class:"field-label"},null,-1),Ts={class:"field-body"},js={class:"field"},Gs={key:0,class:"message is-danger"},Hs=(0,a._)("div",{class:"message-body"}," Please make sure to enter a valid email address in both fields. Neither of them can be empty. ",-1),Os=[Hs],Rs=(0,a.uE)('<div class="field is-horizontal"><div class="field-label"></div><div class="field-body"><div class="field"><div class="control"><button class="button is-primary">Submit</button></div></div></div></div>',1);function Js(s,e,i,o,t,l){const n=(0,a.up)("base-spinner"),c=(0,a.up)("base-modal"),d=(0,a.up)("svg-icon");return(0,a.wg)(),(0,a.iD)("section",null,[t.isLoading?((0,a.wg)(),(0,a.iD)("div",gs,[(0,a.Wm)(n)])):(0,a.kq)("",!0),(0,a.Wm)(c,{show:!!t.error,color:"is-danger",title:"Email Update Error",onClose:l.handleError},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.error),1)])),_:1},8,["show","onClose"]),(0,a.Wm)(c,{show:t.success,color:"is-success",title:"Email Update Succeeded",onClose:l.handleSuccess},{default:(0,a.w5)((()=>[_s])),_:1},8,["show","onClose"]),(0,a._)("div",bs,[Ps,(0,a._)("div",Es,[(0,a._)("form",{onSubmit:e[4]||(e[4]=(0,I.iM)(((...s)=>l.doSubmit&&l.doSubmit(...s)),["prevent"]))},[(0,a._)("div",Cs,[Ss,(0,a._)("div",Vs,[(0,a._)("div",Ns,[(0,a._)("div",Ws,[(0,a.wy)((0,a._)("input",{class:(0,r.C_)(["input",{"is-danger":t.ko,"is-success":t.ok}]),id:"currentEmail",type:"email","onUpdate:modelValue":e[0]||(e[0]=s=>t.currentEmail=s),onKeyup:e[1]||(e[1]=(...s)=>l.checkMail&&l.checkMail(...s))},null,34),[[I.nr,t.currentEmail,void 0,{trim:!0}]]),(0,a._)("span",Is,[(0,a.Wm)(d,{type:"mdi",path:l.emailIcon},{default:(0,a.w5)((()=>[Us])),_:1},8,["path"])])]),t.ko?((0,a.wg)(),(0,a.iD)("p",Ds,"Email address does not match current address")):(0,a.kq)("",!0),t.ok?((0,a.wg)(),(0,a.iD)("p",qs,"Email address matches current address")):(0,a.kq)("",!0)])])]),(0,a._)("div",Ls,[Zs,(0,a._)("div",xs,[(0,a._)("div",zs,[(0,a._)("div",Ms,[(0,a.wy)((0,a._)("input",{class:(0,r.C_)(["input",{"is-danger":t.nko,"is-success":t.nok}]),id:"newEmail",type:"email","onUpdate:modelValue":e[2]||(e[2]=s=>t.newEmail=s),onKeyup:e[3]||(e[3]=(...s)=>l.checkNewMail&&l.checkNewMail(...s))},null,34),[[I.nr,t.newEmail,void 0,{trim:!0}]]),(0,a._)("span",As,[(0,a.Wm)(d,{type:"mdi",path:l.emailIcon},{default:(0,a.w5)((()=>[$s])),_:1},8,["path"])])]),t.nko?((0,a.wg)(),(0,a.iD)("p",Bs,"Not a valid email address")):(0,a.kq)("",!0),t.nok?((0,a.wg)(),(0,a.iD)("p",Fs,"Valid email address")):(0,a.kq)("",!0)])])]),(0,a._)("div",Ys,[Ks,(0,a._)("div",Ts,[(0,a._)("div",js,[t.formIsValid?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("article",Gs,Os))])])]),Rs],32)])])])}function Qs(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}var Xs={name:"AccountEmail",components:{BaseSpinner:b.Z,BaseModal:P.Z,SvgIcon:E.Z},computed:{emailIcon(){return C.bn2},profileEmail(){const s=this.$store.getters["auth/profile"];return s.email}},data(){return{isLoading:!1,success:!1,error:null,currentEmail:"",newEmail:"",formIsValid:!0,ko:!1,ok:!1,nko:!1,nok:!1}},methods:{handleError(){this.error=null},handleSuccess(){this.success=!1,this.newEmail="",this.currentEmail="",this.formIsValid=!0,this.ko=!1,this.ok=!1,this.nok=!1,this.nko=!1},checkMail(){""!==this.currentEmail?this.currentEmail===this.profileEmail?(this.ko=!1,this.ok=!0):(this.ko=!0,this.ok=!1):(this.ok=!1,this.ko=!1)},checkNewMail(){if(""===this.newEmail)return this.nok=!1,void(this.nko=!1);Qs(this.newEmail)?(this.nok=!0,this.nko=!1):(this.nok=!1,this.nko=!0)},async doSubmit(){if(this.ko||!this.ok||this.nko||!this.nok)return void(this.formIsValid=!1);this.isLoading=!0;const s={currentEmail:this.currentEmail,newEmail:this.newEmail};try{await this.$store.dispatch("auth/changeEmail",s),this.success=!0}catch(e){this.error=e.message||"Failed to update your email address, try later."}this.isLoading=!1}}};const se=(0,V.Z)(Xs,[["render",Js]]);var ee=se;const ie={key:0},ae={class:"card"},oe=(0,a._)("div",{class:"card-header"},[(0,a._)("p",{class:"card-header-title"}," Email Notification ")],-1),te={class:"card-content content"},le={class:"field is-horizontal"},re=(0,a._)("div",{class:"field-label"},[(0,a._)("label",{class:"label",for:"notify"},"Notification")],-1),ne={class:"field-body"},ce={class:"field"},de={class:"control"},ue={class:"checkbox has-text-grey-dark"},he=["checked"],me=(0,a.Uk)(" Notify me via email about soon expiring contracts "),pe=(0,a.uE)('<div class="field is-horizontal"><div class="field-label"></div><div class="field-body"><div class="field"><p class="help has-text-grey-dark"><span class="has-text-weight-semibold">Please note:</span> There will be one email sent 3 days prior contract expiration. If several contracts expire in three days time, you will only receive one email, listing all of them. </p></div></div></div>',1);function fe(s,e,i,o,t,l){const n=(0,a.up)("base-spinner"),c=(0,a.up)("base-modal");return(0,a.wg)(),(0,a.iD)("section",null,[t.isLoading?((0,a.wg)(),(0,a.iD)("div",ie,[(0,a.Wm)(n)])):(0,a.kq)("",!0),(0,a.Wm)(c,{show:!!t.error,color:"is-danger",title:"Email Update Error",onClose:l.handleError},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.error),1)])),_:1},8,["show","onClose"]),(0,a._)("div",ae,[oe,(0,a._)("div",te,[(0,a._)("div",le,[re,(0,a._)("div",ne,[(0,a._)("div",ce,[(0,a._)("div",de,[(0,a._)("label",ue,[(0,a._)("input",{type:"checkbox",id:"notify",checked:l.accountWantsNotify,onChange:e[0]||(e[0]=(...s)=>l.toggleNotify&&l.toggleNotify(...s))},null,40,he),me])])])])]),pe])])])}var we={name:"AccountNotify",components:{BaseModal:P.Z,BaseSpinner:b.Z},computed:{accountWantsNotify(){return this.$store.getters["auth/wantsNotify"]}},data(){return{isLoading:!1,error:null}},methods:{async toggleNotify(){this.isLoading=!0;try{await this.$store.dispatch("auth/toggleNotify")}catch(s){this.error=s.message||"Failed to update your notification settings, try later."}this.isLoading=!1},handleError(){this.error=null}}};const ve=(0,V.Z)(we,[["render",fe]]);var ke=ve,ye={name:"UserProfile",components:{AccountVerify:W,AccountPassword:ys,AccountEmail:ee,AccountNotify:ke},computed:{accountIsVerified(){return this.$store.getters["auth/isVerified"]}}};const ge=(0,V.Z)(ye,[["render",l]]);var _e=ge},6920:function(s,e,i){s.exports=i.p+"img/payment.7442bd9d.png"}}]);
//# sourceMappingURL=952.ac42556c.js.map