"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[207],{1773:function(e,s,o){o.d(s,{Z:function(){return p}});var t=o(6252),r=o(3577);const i={class:"modal-content"},a={class:"message-header"},n={class:"message-body"};function l(e,s,o,l,c,u){return(0,t.wg)(),(0,t.j4)(t.lR,{to:"body"},[(0,t._)("div",{class:(0,r.C_)(["modal",{"is-active":o.show}])},[(0,t._)("div",{class:"modal-background",onClick:s[0]||(s[0]=(...e)=>u.signalClose&&u.signalClose(...e))}),(0,t._)("div",i,[(0,t._)("article",{class:(0,r.C_)(["message",o.color])},[(0,t._)("div",a,[(0,t.WI)(e.$slots,"header",{},(()=>[(0,t._)("p",null,(0,r.zw)(o.title),1)])),(0,t._)("button",{class:"delete","aria-label":"delete",onClick:s[1]||(s[1]=(...e)=>u.signalClose&&u.signalClose(...e))})]),(0,t._)("div",n,[(0,t.WI)(e.$slots,"default")])],2)]),(0,t._)("button",{class:"modal-close is-large","aria-label":"close",onClick:s[2]||(s[2]=(...e)=>u.signalClose&&u.signalClose(...e))})],2)])}var c={name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},color:{type:String,required:!1,default:null}},emits:["close"],methods:{signalClose(){this.$emit("close")}}},u=o(3744);const d=(0,u.Z)(c,[["render",l]]);var p=d},7880:function(e,s,o){o.r(s),o.d(s,{default:function(){return pe}});var t=o(6252);const r={class:"section"},i={class:"container"};function a(e,s,o,a,n,l){const c=(0,t.up)("account-add-group"),u=(0,t.up)("account-group-list");return(0,t.wg)(),(0,t.iD)("section",r,[(0,t._)("div",i,[(0,t.Wm)(c,{class:"mb-6"}),(0,t.Wm)(u)])])}var n=o(3577),l=o(9963);const c={key:0},u=(0,t.Uk)(" The group has been added to your account. "),d={class:"card"},p=(0,t._)("div",{class:"card-header"},[(0,t._)("p",{class:"card-header-title"}," Add Group ")],-1),h={class:"card-content content"},m={class:"field is-horizontal"},g=(0,t._)("div",{class:"field-label is-normal"},[(0,t._)("label",{class:"label",for:"groupName"},"Group Name")],-1),f={class:"field-body"},v={class:"field"},_={class:"control is-expanded has-icons-left"},y={class:"icon is-small is-left"},w=(0,t.Uk)(" "),b={class:"field is-horizontal"},k=(0,t._)("div",{class:"field-label"},null,-1),C={class:"field-body"},S={class:"field"},G={key:0,class:"message is-danger"},I=(0,t._)("div",{class:"message-body"}," Group Name must not be empty. ",-1),V=[I],W=(0,t.uE)('<div class="field is-horizontal"><div class="field-label"></div><div class="field-body"><div class="field"><div class="control"><button class="button is-primary">Submit</button></div></div></div></div>',1);function U(e,s,o,r,i,a){const I=(0,t.up)("base-spinner"),U=(0,t.up)("base-modal"),N=(0,t.up)("svg-icon");return(0,t.wg)(),(0,t.iD)("section",null,[i.isLoading?((0,t.wg)(),(0,t.iD)("div",c,[(0,t.Wm)(I)])):(0,t.kq)("",!0),(0,t.Wm)(U,{show:!!i.error,color:"is-danger",title:"Verification Error",onClose:a.handleError},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(i.error),1)])),_:1},8,["show","onClose"]),(0,t.Wm)(U,{show:i.success,color:"is-success",title:"Verification Succeeded",onClose:a.handleSuccess},{default:(0,t.w5)((()=>[u])),_:1},8,["show","onClose"]),(0,t._)("div",d,[p,(0,t._)("div",h,[(0,t._)("form",{onSubmit:s[1]||(s[1]=(0,l.iM)(((...e)=>a.doSubmit&&a.doSubmit(...e)),["prevent"]))},[(0,t._)("div",m,[g,(0,t._)("div",f,[(0,t._)("div",v,[(0,t._)("div",_,[(0,t.wy)((0,t._)("input",{class:"input",id:"groupName",type:"text",placeholder:"FSEconomy Group Name","onUpdate:modelValue":s[0]||(s[0]=e=>i.groupName=e)},null,512),[[l.nr,i.groupName,void 0,{trim:!0}]]),(0,t._)("span",y,[(0,t.Wm)(N,{type:"mdi",path:a.groupIcon},{default:(0,t.w5)((()=>[w])),_:1},8,["path"])])])])])]),(0,t._)("div",b,[k,(0,t._)("div",C,[(0,t._)("div",S,[i.formIsValid?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("article",G,V))])])]),W],32)])])])}var N=o(5422),Z=o(1773),A=o(2273),D=o(5317),L={name:"AccountAddGroup",components:{BaseSpinner:N.Z,BaseModal:Z.Z,SvgIcon:A.Z},computed:{groupIcon(){return D.zr}},data(){return{isLoading:!1,success:!1,error:null,groupName:"",formIsValid:!0}},methods:{handleError(){this.error=null},handleSuccess(){this.success=!1,this.groupName="",this.formIsValid=!0},async doSubmit(){if(""===this.groupName)return void(this.formIsValid=!1);this.isLoading=!0;const e={groupName:this.groupName};try{await this.$store.dispatch("auth/addGroup",e),this.success=!0}catch(s){this.error=s.message||`Failed to add group ${this.groupName} to your account, try later.`}this.isLoading=!1}}},q=o(3744);const z=(0,q.Z)(L,[["render",U]]);var E=z,$=o(6920);const B={key:0},H=(0,t.Uk)(" Some or all of your groups have been verified. "),x=(0,t._)("div",{class:"content"},[(0,t._)("p",null,[(0,t.Uk)(" One or several groups associated with your account have not yet been verified. Stormrose uses micro payments within the "),(0,t._)("a",{href:"https://server.fseconomy.net/"},"FSEconomy Game World"),(0,t.Uk)(" to verify groups. Please check the "),(0,t._)("a",{href:"https://server.fseconomy.net/banksummary.jsp"},"Payment Log"),(0,t.Uk)(" of the respective group for such a micro payment. It was sent when the group was registered for your account, and should look like this: ")]),(0,t._)("figure",{class:"image"},[(0,t._)("img",{src:$,alt:"payment illustration"})]),(0,t._)("p",null,[(0,t.Uk)(" Please use the FSEconomy Game World "),(0,t._)("a",{href:"https://server.fseconomy.net/banksummary.jsp"},"banking page"),(0,t.Uk)(" to return this micro payment to the group it came from. This is part of an automated process so please: ")]),(0,t._)("ul",null,[(0,t._)("li",null,"send it back in one transaction & make sure the amount is correct"),(0,t._)("li",null,"select the destination group from the drop-down list that appears when you start typing the name"),(0,t._)("li",null,"include the verification token (alphanumeric token provided in the “Comments” field) in the Comments field. ")]),(0,t._)("p",null," Once the transaction is completed, use the Verify Groups button to confirm the transaction and complete the verification process. ")],-1),F={class:"card"},j=(0,t._)("div",{class:"card-header"},[(0,t._)("p",{class:"card-header-title"}," Groups Associated With Your Account ")],-1),M={class:"card-content content"},P={class:"table"},K=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"Group"),(0,t._)("th",null,"Verification Status")])],-1),O={key:0,class:"field is-grouped"},T={class:"control"},Y={class:"control"};function Q(e,s,o,r,i,a){const l=(0,t.up)("base-spinner"),c=(0,t.up)("base-modal"),u=(0,t.up)("account-group-item");return(0,t.wg)(),(0,t.iD)("section",null,[i.isLoading?((0,t.wg)(),(0,t.iD)("div",B,[(0,t.Wm)(l)])):(0,t.kq)("",!0),(0,t.Wm)(c,{show:!!i.error,color:"is-danger",title:"Verification Error",onClose:a.handleError},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(i.error),1)])),_:1},8,["show","onClose"]),(0,t.Wm)(c,{show:i.success,color:"is-success",title:"Verification Succeeded",onClose:a.handleSuccess},{default:(0,t.w5)((()=>[H])),_:1},8,["show","onClose"]),(0,t.Wm)(c,{show:i.help,title:"Group Verification",onClose:a.toggleHelp},{default:(0,t.w5)((()=>[x])),_:1},8,["show","onClose"]),(0,t._)("div",F,[j,(0,t._)("div",M,[(0,t._)("table",P,[K,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.groups,(e=>((0,t.wg)(),(0,t.j4)(u,{group:e.group,verified:!!e.verified,key:e.group},null,8,["group","verified"])))),128))])]),a.allVerified?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",O,[(0,t._)("div",T,[(0,t._)("button",{class:"button is-primary",onClick:s[0]||(s[0]=(...e)=>a.validateGroups&&a.validateGroups(...e))},"Verify Groups")]),(0,t._)("div",Y,[(0,t._)("button",{class:"button is-light",onClick:s[1]||(s[1]=(...e)=>a.toggleHelp&&a.toggleHelp(...e))},"Help")])]))])])])}const R={key:0},J={class:"icon has-text-success"},X=(0,t.Uk)(" "),ee={key:1},se={class:"icon has-text-danger"},oe=(0,t.Uk)(" ");function te(e,s,o,r,i,a){const l=(0,t.up)("svg-icon");return(0,t.wg)(),(0,t.iD)("tr",null,[(0,t._)("td",null,(0,n.zw)(o.group),1),o.verified?((0,t.wg)(),(0,t.iD)("td",R,[(0,t._)("span",J,[(0,t.Wm)(l,{type:"mdi",path:a.okIcon,size:24},{default:(0,t.w5)((()=>[X])),_:1},8,["path"])])])):((0,t.wg)(),(0,t.iD)("td",ee,[(0,t._)("span",se,[(0,t.Wm)(l,{type:"mdi",path:a.koIcon,size:24},{default:(0,t.w5)((()=>[oe])),_:1},8,["path"])])]))])}var re={name:"AccountGroupItem",components:{SvgIcon:A.Z},computed:{okIcon(){return D._qK},koIcon(){return D.uQ7}},props:{group:{type:String,required:!0},verified:{type:Boolean,required:!0}}};const ie=(0,q.Z)(re,[["render",te]]);var ae=ie,ne={name:"AccountGroupList",components:{AccountGroupItem:ae,BaseSpinner:N.Z,BaseModal:Z.Z},computed:{groups(){const e=this.$store.getters["auth/profile"],s=e.groups;return s.sort(((e,s)=>e.group.localeCompare(s.group))),s},allVerified(){const e=this.$store.getters["auth/profile"];let s=!0;for(const o of e.groups)s=s&&!!o.verified;return s}},data(){return{isLoading:!1,success:!1,error:null,help:!1}},methods:{handleError(){this.error=null},handleSuccess(){this.success=!1},async validateGroups(){this.isLoading=!0;try{await this.$store.dispatch("auth/verifyGroups"),this.success=!0}catch(e){this.error=e.message||"Failed to verify your groups, try later."}this.isLoading=!1},toggleHelp(){this.help=!this.help}}};const le=(0,q.Z)(ne,[["render",Q]]);var ce=le,ue={name:"UserGroups.vue",components:{AccountAddGroup:E,AccountGroupList:ce},computed:{accountIsVerified(){return this.$store.getters["auth/isVerified"]}}};const de=(0,q.Z)(ue,[["render",a]]);var pe=de},6920:function(e,s,o){e.exports=o.p+"img/payment.7442bd9d.png"}}]);
//# sourceMappingURL=207.c32ee1ae.js.map