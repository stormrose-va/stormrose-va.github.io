(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[856],{1223:function(e,s,a){var i=a(5112),n=a(30),t=a(3070),r=i("unscopables"),l=Array.prototype;void 0==l[r]&&t.f(l,r,{configurable:!0,value:n(null)}),e.exports=function(e){l[r][e]=!0}},490:function(e,s,a){var i=a(5005);e.exports=i("document","documentElement")},30:function(e,s,a){var i,n=a(9670),t=a(6048),r=a(748),l=a(3501),o=a(490),c=a(317),d=a(6200),u=">",m="<",h="prototype",p="script",f=d("IE_PROTO"),v=function(){},k=function(e){return m+p+u+e+m+"/"+p+u},g=function(e){e.write(k("")),e.close();var s=e.parentWindow.Object;return e=null,s},_=function(){var e,s=c("iframe"),a="java"+p+":";return s.style.display="none",o.appendChild(s),s.src=String(a),e=s.contentWindow.document,e.open(),e.write(k("document.F=Object")),e.close(),e.F},b=function(){try{i=new ActiveXObject("htmlfile")}catch(s){}b="undefined"!=typeof document?document.domain&&i?g(i):_():g(i);var e=r.length;while(e--)delete b[h][r[e]];return b()};l[f]=!0,e.exports=Object.create||function(e,s){var a;return null!==e?(v[h]=n(e),a=new v,v[h]=null,a[f]=e):a=b(),void 0===s?a:t.f(a,s)}},6048:function(e,s,a){var i=a(9781),n=a(3353),t=a(3070),r=a(9670),l=a(5656),o=a(1956);s.f=i&&!n?Object.defineProperties:function(e,s){r(e);var a,i=l(s),n=o(s),c=n.length,d=0;while(c>d)t.f(e,a=n[d++],i[a]);return e}},1956:function(e,s,a){var i=a(6324),n=a(748);e.exports=Object.keys||function(e){return i(e,n)}},6699:function(e,s,a){"use strict";var i=a(2109),n=a(1318).includes,t=a(7293),r=a(1223),l=t((function(){return!Array(1).includes()}));i({target:"Array",proto:!0,forced:l},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},4642:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Q}});var i=a(6252),n=a(3577),t=a(9963);const r={class:"section"},l={class:"modal-content"},o={class:"message is-danger"},c={class:"message-header"},d=(0,i._)("p",null,"Signup Error",-1),u={class:"message-body"},m={class:"modal-content"},h={class:"message is-success"},p={class:"message-header"},f=(0,i._)("p",null,"Registration Succeeded",-1),v=(0,i._)("div",{class:"message-body"}," Your account has been created and linked with your FSEconomy account. Your initial password has been sent to the indicated email address. If you can't find the email, please make sure to check your spam folder. ",-1),k={class:"container"},g={key:0},_={class:"columns is-centered"},b={class:"column is-5-tablet is-5-desktop is-4-widescreen"},y={class:"box"},w={class:"field"},S=(0,i._)("label",{class:"label",for:"username"},"FSEconomy Username",-1),U={class:"control has-icons-left"},E={class:"icon is-small is-left"},C=(0,i.Uk)(" "),I={class:"field"},O=(0,i._)("label",{class:"label",for:"email"},"Email Address",-1),j={class:"control has-icons-left"},W={class:"icon is-small is-left"},x=(0,i.Uk)(" "),A={key:0,class:"help is-danger"},V={key:1,class:"help is-success"},q={class:"field"},D={class:"help"},F=(0,i.Uk)(" By registering an account, you give Stormrose permission to store and process submitted data in accordance with our "),L=(0,i.Uk)("privacy policy"),M=(0,i.Uk)(" and confirm you have read and agree to our "),$=(0,i.Uk)("terms of service"),P=(0,i.Uk)(". "),Z={key:0,class:"message is-danger"},B=(0,i._)("div",{class:"message-body"}," Please make sure to enter a username and a valid email address. Neither of them can be empty. ",-1),N=[B],R=(0,i._)("div",{class:"field is-grouped"},[(0,i._)("div",{class:"control"},[(0,i._)("button",{class:"button is-link"},"Sign Up")])],-1);function Y(e,s,a,B,Y,z){const K=(0,i.up)("base-spinner"),T=(0,i.up)("svg-icon"),X=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("section",r,[(0,i._)("div",{class:(0,n.C_)(["modal",{"is-active":!!Y.error}])},[(0,i._)("div",{class:"modal-background",onClick:s[0]||(s[0]=(...e)=>z.handleError&&z.handleError(...e))}),(0,i._)("div",l,[(0,i._)("article",o,[(0,i._)("div",c,[d,(0,i._)("button",{class:"delete","aria-label":"delete",onClick:s[1]||(s[1]=(...e)=>z.handleError&&z.handleError(...e))})]),(0,i._)("div",u,(0,n.zw)(Y.error),1)])]),(0,i._)("button",{class:"modal-close is-large","aria-label":"close",onClick:s[2]||(s[2]=(...e)=>z.handleError&&z.handleError(...e))})],2),(0,i._)("div",{class:(0,n.C_)(["modal",{"is-active":Y.success}])},[(0,i._)("div",{class:"modal-background",onClick:s[3]||(s[3]=(...e)=>z.handleSuccess&&z.handleSuccess(...e))}),(0,i._)("div",m,[(0,i._)("article",h,[(0,i._)("div",p,[f,(0,i._)("button",{class:"delete","aria-label":"delete",onClick:s[4]||(s[4]=(...e)=>z.handleSuccess&&z.handleSuccess(...e))})]),v])]),(0,i._)("button",{class:"modal-close is-large","aria-label":"close",onClick:s[5]||(s[5]=(...e)=>z.handleSuccess&&z.handleSuccess(...e))})],2),(0,i._)("div",k,[Y.isLoading?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(K)])):(0,i.kq)("",!0),(0,i._)("div",_,[(0,i._)("div",b,[(0,i._)("div",y,[(0,i._)("form",{onSubmit:s[9]||(s[9]=(0,t.iM)(((...e)=>z.doSignUp&&z.doSignUp(...e)),["prevent"]))},[(0,i._)("div",w,[S,(0,i._)("div",U,[(0,i.wy)((0,i._)("input",{class:"input",type:"text",id:"username",placeholder:"Username",ref:"userInput","onUpdate:modelValue":s[6]||(s[6]=e=>Y.username=e)},null,512),[[t.nr,Y.username,void 0,{trim:!0}]]),(0,i._)("span",E,[(0,i.Wm)(T,{type:"mdi",path:z.userIcon},{default:(0,i.w5)((()=>[C])),_:1},8,["path"])])])]),(0,i._)("div",I,[O,(0,i._)("div",j,[(0,i.wy)((0,i._)("input",{class:(0,n.C_)(["input",{"is-danger":Y.ko,"is-success":Y.ok}]),type:"email",id:"email",placeholder:"Email Address","onUpdate:modelValue":s[7]||(s[7]=e=>Y.email=e),onKeyup:s[8]||(s[8]=(...e)=>z.checkMail&&z.checkMail(...e))},null,34),[[t.nr,Y.email,void 0,{trim:!0}]]),(0,i._)("span",W,[(0,i.Wm)(T,{type:"mdi",path:z.emailIcon},{default:(0,i.w5)((()=>[x])),_:1},8,["path"])])]),Y.ko?((0,i.wg)(),(0,i.iD)("p",A,"Not a valid email address")):(0,i.kq)("",!0),Y.ok?((0,i.wg)(),(0,i.iD)("p",V,"Valid email address")):(0,i.kq)("",!0)]),(0,i._)("div",q,[(0,i._)("p",D,[F,(0,i.Wm)(X,{to:"/privacy",target:"_blank"},{default:(0,i.w5)((()=>[L])),_:1}),M,(0,i.Wm)(X,{to:"/terms",target:"_blank"},{default:(0,i.w5)((()=>[$])),_:1}),P])]),Y.formIsValid?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("article",Z,N)),R],32)])])])])])}a(6699);var z=a(5422),K=a(2273),T=a(5317);function X(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}var G={name:"UserSignup.vue",components:{BaseSpinner:z.Z,SvgIcon:K.Z},computed:{userIcon(){return T.rI3},emailIcon(){return T.bn2}},data(){return{isLoading:!1,error:null,success:!1,formIsValid:!0,username:"",email:"",ok:!1,ko:!1}},methods:{async doSignUp(){if(""===this.username||""===this.email||!this.email.includes("@"))return void(this.formIsValid=!1);this.isLoading=!0;const e={username:this.username,email:this.email};try{await this.$store.dispatch("auth/register",e),this.success=!0}catch(s){this.error=s.message||"Failed to register, try later."}this.isLoading=!1},handleError(){this.error=null},handleSuccess(){this.success=!1;const e="/"+(this.$route.query.goto||"aircraft");this.$router.replace(e)},checkMail(){if(""===this.email)return this.ok=!1,void(this.ko=!1);X(this.email)?(this.ok=!0,this.ko=!1):(this.ok=!1,this.ko=!0)}}},H=a(3744);const J=(0,H.Z)(G,[["render",Y]]);var Q=J}}]);
//# sourceMappingURL=856.63dedb73.js.map