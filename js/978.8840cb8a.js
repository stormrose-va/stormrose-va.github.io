"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[978],{4301:function(s,e,a){a.r(e),a.d(e,{default:function(){return A}});var r=a(6252),o=a(3577),n=a(9963);const i={class:"section"},t={class:"modal-content"},l={class:"message is-danger"},d={class:"message-header"},c=(0,r._)("p",null,"Login Error",-1),u={class:"message-body"},m={class:"container"},p={key:0},h={class:"columns is-centered"},_={class:"column is-5-tablet is-5-desktop is-4-widescreen"},g={class:"box"},f={class:"field"},v=(0,r._)("label",{class:"label",for:"username"},"Username",-1),w={class:"control has-icons-left"},b={class:"icon is-small is-left"},k=(0,r.Uk)(" "),y={class:"field"},I=(0,r._)("label",{class:"label",for:"password"},"Password",-1),L={class:"control has-icons-left"},U={class:"icon is-small is-left"},E=(0,r.Uk)(" "),C={key:0,class:"message is-danger"},V=(0,r._)("div",{class:"message-body"}," Please make sure to enter a username and password. Neither of them can be empty. ",-1),W=[V],D={class:"field is-grouped"},S=(0,r._)("div",{class:"control"},[(0,r._)("button",{class:"button is-link"},"Login")],-1),q={class:"control"},Z=(0,r.Uk)("Sign Up"),$={class:"control"},x=(0,r.Uk)("I forgot my password.");function P(s,e,a,V,P,z){const B=(0,r.up)("base-spinner"),F=(0,r.up)("svg-icon"),M=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("section",i,[(0,r._)("div",{class:(0,o.C_)(["modal",{"is-active":!!P.error}])},[(0,r._)("div",{class:"modal-background",onClick:e[0]||(e[0]=(...s)=>z.handleError&&z.handleError(...s))}),(0,r._)("div",t,[(0,r._)("article",l,[(0,r._)("div",d,[c,(0,r._)("button",{class:"delete","aria-label":"delete",onClick:e[1]||(e[1]=(...s)=>z.handleError&&z.handleError(...s))})]),(0,r._)("div",u,(0,o.zw)(P.error),1)])]),(0,r._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[2]||(e[2]=(...s)=>z.handleError&&z.handleError(...s))})],2),(0,r._)("div",m,[P.isLoading?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(B)])):(0,r.kq)("",!0),(0,r._)("div",h,[(0,r._)("div",_,[(0,r._)("div",g,[(0,r._)("form",{onSubmit:e[5]||(e[5]=(0,n.iM)(((...s)=>z.doLogin&&z.doLogin(...s)),["prevent"]))},[(0,r._)("div",f,[v,(0,r._)("div",w,[(0,r.wy)((0,r._)("input",{class:"input",id:"username",type:"text",placeholder:"Username",ref:"userInput","onUpdate:modelValue":e[3]||(e[3]=s=>P.username=s)},null,512),[[n.nr,P.username,void 0,{trim:!0}]]),(0,r._)("span",b,[(0,r.Wm)(F,{type:"mdi",path:z.userIcon},{default:(0,r.w5)((()=>[k])),_:1},8,["path"])])])]),(0,r._)("div",y,[I,(0,r._)("div",L,[(0,r.wy)((0,r._)("input",{class:"input",id:"password",type:"password","onUpdate:modelValue":e[4]||(e[4]=s=>P.password=s)},null,512),[[n.nr,P.password,void 0,{trim:!0}]]),(0,r._)("span",U,[(0,r.Wm)(F,{type:"mdi",path:z.passwordIcon},{default:(0,r.w5)((()=>[E])),_:1},8,["path"])])])]),P.formIsValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("article",C,W)),(0,r._)("div",D,[S,(0,r._)("div",q,[(0,r.Wm)(M,{to:{name:"signup"},class:"button is-link is-light"},{default:(0,r.w5)((()=>[Z])),_:1})]),(0,r._)("div",$,[(0,r.Wm)(M,{to:{name:"password"},class:"button"},{default:(0,r.w5)((()=>[x])),_:1})])])],32)])])])])])}var z=a(2273),B=a(5317),F=a(5422),M={name:"UserLogin.vue",components:{SvgIcon:z.Z,BaseSpinner:F.Z},computed:{userIcon(){return B.rI3},passwordIcon(){return B.d5D}},data(){return{username:"",password:"",formIsValid:!0,isLoading:!1,error:null}},methods:{async doLogin(){if(""===this.username||""===this.password)return void(this.formIsValid=!1);this.isLoading=!0;const s={username:this.username,password:this.password};try{await this.$store.dispatch("auth/login",s);const e="/"+(this.$route.query.goto||"aircraft");await this.$router.replace(e)}catch(e){this.error=e.message||"Failed to authenticate, try later."}this.isLoading=!1},handleError(){this.error=null}}},N=a(3744);const j=(0,N.Z)(M,[["render",P]]);var A=j}}]);
//# sourceMappingURL=978.8840cb8a.js.map