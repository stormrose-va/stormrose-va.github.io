"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[785],{1773:function(t,e,s){s.d(e,{Z:function(){return h}});var a=s(6252),n=s(3577);const o={class:"modal-content"},r={class:"message-header"},i={class:"message-body"};function l(t,e,s,l,c,d){return(0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a._)("div",{class:(0,n.C_)(["modal",{"is-active":s.show}])},[(0,a._)("div",{class:"modal-background",onClick:e[0]||(e[0]=(...t)=>d.signalClose&&d.signalClose(...t))}),(0,a._)("div",o,[(0,a._)("article",{class:(0,n.C_)(["message",s.color])},[(0,a._)("div",r,[(0,a.WI)(t.$slots,"header",{},(()=>[(0,a._)("p",null,(0,n.zw)(s.title),1)])),(0,a._)("button",{class:"delete","aria-label":"delete",onClick:e[1]||(e[1]=(...t)=>d.signalClose&&d.signalClose(...t))})]),(0,a._)("div",i,[(0,a.WI)(t.$slots,"default")])],2)]),(0,a._)("button",{class:"modal-close is-large","aria-label":"close",onClick:e[2]||(e[2]=(...t)=>d.signalClose&&d.signalClose(...t))})],2)])}var c={name:"BaseModal",props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},color:{type:String,required:!1,default:null}},emits:["close"],methods:{signalClose(){this.$emit("close")}}},d=s(3744);const u=(0,d.Z)(c,[["render",l]]);var h=u},3671:function(t,e,s){s.r(e),s.d(e,{default:function(){return tt}});var a=s(6252),n=s(3577);const o={class:"section"},r={class:"container"},i={key:0},l={key:4,class:"card"},c=(0,a._)("div",{class:"card-header"},[(0,a._)("p",{class:"card-header-title"}," No Contracts Available ")],-1),d=(0,a._)("div",{class:"card-content content"},[(0,a._)("p",null,"Sorry, we could not find any contracts associated with your account.")],-1),u=[c,d];function h(t,e,s,c,d,h){const p=(0,a.up)("base-modal"),g=(0,a.up)("base-spinner"),f=(0,a.up)("contract-list");return(0,a.wg)(),(0,a.iD)("section",o,[(0,a._)("div",r,[(0,a.Wm)(p,{show:!!d.error,color:"is-danger",title:"Data Loading Error",onClose:h.handleError},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(d.error),1)])),_:1},8,["show","onClose"]),d.isLoading?((0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(g)])):(0,a.kq)("",!0),h.hasPendingContracts?((0,a.wg)(),(0,a.j4)(f,{key:1,class:"mb-6",contracts:h.pendingContracts,title:"Contracts with Pending Payments",update:!0,extend:!1},null,8,["contracts"])):(0,a.kq)("",!0),h.hasActiveContracts?((0,a.wg)(),(0,a.j4)(f,{key:2,class:"mb-6",contracts:h.activeContracts,title:"Active Contracts",update:!1,extend:!0},null,8,["contracts"])):(0,a.kq)("",!0),h.hasClosedContracts?((0,a.wg)(),(0,a.j4)(f,{key:3,contracts:h.closedContracts,title:"Closed Contracts",update:!1,extend:!1},null,8,["contracts"])):(0,a.kq)("",!0),h.hasContracts?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",l,u))])])}var p=s(5422),g=s(1773);const f=(0,a.Uk)(" Payment data has been refreshed. If the system recognized any pending payments, the corresponding aircraft will have automatically been leased out to the indicated target account. "),m={class:"mb-2"},w={key:0,class:"mb-2"},y={key:1,class:"mb-2"},_={key:2,class:"mb-2"},C={key:3},k={key:4},b={key:5},v={key:0},D={class:"card-header"},R={class:"card-header-title"},z={class:"card-content content"},q={class:"table is-striped is-hoverable is-fullwidth"},S=(0,a._)("tr",null,[(0,a._)("th",null,"Id"),(0,a._)("th",null,"Aircraft"),(0,a._)("th",null,"Model"),(0,a._)("th",null,"Leasing Rate"),(0,a._)("th",null,"Leased To"),(0,a._)("th",null,"Start"),(0,a._)("th",null,"End"),(0,a._)("th",null,"Paid Until")],-1),L=["onClick"],P={key:0},x={key:0},$=(0,a.Uk)(" To activate your pending leasing contracts, please issue the corresponding payment from your personal account or the group account the aircraft shall be leased to (cf. “Lease To” in the table above) to the group account "),U=(0,a._)("span",{class:"has-text-weight-semibold has-text-primary"},"Stormrose",-1),A=(0,a.Uk)(". Please note: "),W=[$,U,A],Z={key:1},B=(0,a.Uk)(" To extend an active leasing contract, simply send another monthly payment from your personal account or the group account the aircraft is leased to (cf. “Lease To” in the table above) to the group account "),I=(0,a._)("span",{class:"has-text-weight-semibold has-text-primary"},"Stormrose",-1),E=(0,a.Uk)(". Please note: "),Y=[B,I,E],j=(0,a._)("ul",null,[(0,a._)("li",null,[(0,a.Uk)("All payments have to be made to the "),(0,a._)("span",{class:"has-text-weight-semibold has-text-primary"},"Stormrose"),(0,a.Uk)(" group account")]),(0,a._)("li",null,"Do not bundle or split payments – our automated system will look for one payment per leasing contract and month."),(0,a._)("li",null,"Do not forget to put the aircraft registration into the comment field when sending a payment.")],-1),M={class:"icon is-small"},T=(0,a.Uk)(" "),F=(0,a._)("span",null,"Refresh Payment Status",-1);function H(t,e,s,o,r,i){const l=(0,a.up)("base-modal"),c=(0,a.up)("base-spinner"),d=(0,a.up)("svg-icon");return(0,a.wg)(),(0,a.iD)("section",null,[(0,a.Wm)(l,{show:!!r.error,color:"is-danger",title:"Error",onClose:i.handleError},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(r.error),1)])),_:1},8,["show","onClose"]),(0,a.Wm)(l,{show:r.success,color:"is-success",title:"Payments Refreshed",onClose:i.handleSuccess},{default:(0,a.w5)((()=>[f])),_:1},8,["show","onClose"]),(0,a.Wm)(l,{show:r.details.show,color:"is-info",title:"Maintenance Information",onClose:i.handleDetails},{default:(0,a.w5)((()=>[(0,a._)("p",m,"for contract #"+(0,n.zw)(r.details.id)+", aircraft "+(0,n.zw)(r.details.reg)+" "+(0,n.zw)(r.details.model),1),r.details.inspectionRate>0&&!r.details.inspectionRefund?((0,a.wg)(),(0,a.iD)("p",w," You are eligible for a refund of "+(0,n.zw)(100*r.details.inspectionRate)+"% of the cost of your first 100 hours inspection. ",1)):r.details.inspectionRate>0&&r.details.inspectionRefund?((0,a.wg)(),(0,a.iD)("p",y,(0,n.zw)(100*r.details.inspectionRate)+"% of the cost of your first 100 hours inspection have already been refunded to you. ",1)):((0,a.wg)(),(0,a.iD)("p",_," At the moment of lease, the aircraft had less than 10 hours of hobbs time after its last 100 hours inspection. You are therefore not eligible for any refund on 100 hours inspection cost. ")),r.details.ac_intact||r.details.repairRefund?!r.details.ac_intact&&r.details.repairRefund?((0,a.wg)(),(0,a.iD)("p",k," Your first random damage repair has already been refunded to you, as the aircraft was in need of repair upon start of the leasing contract. ")):((0,a.wg)(),(0,a.iD)("p",b," At the moment of lease, the aircraft was not in need of repair. You are therefore not eligible for any refund on random repair cost. ")):((0,a.wg)(),(0,a.iD)("p",C," You are eligible to a refund of your first random damage repair, as the aircraft was in need of repair upon start of the leasing contract. "))])),_:1},8,["show","onClose"]),r.isLoading?((0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(c)])):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)(["card",s.classes])},[(0,a._)("div",D,[(0,a._)("p",R,(0,n.zw)(s.title),1)]),(0,a._)("div",z,[(0,a._)("table",q,[(0,a._)("thead",null,[S,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.contracts,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id,onClick:e=>i.showDetails(t.id)},[(0,a._)("td",null,(0,n.zw)(t.id),1),(0,a._)("td",null,(0,n.zw)(t.ac_reg),1),(0,a._)("td",null,(0,n.zw)(t.ac_type),1),(0,a._)("td",null,(0,n.zw)("v$"+t.rate.toLocaleString("en-US",{maximumFractionDigits:0})),1),(0,a._)("td",null,(0,n.zw)(t.target_name),1),(0,a._)("td",null,(0,n.zw)(t.start_date),1),(0,a._)("td",null,(0,n.zw)(t.end_date),1),(0,a._)("td",null,(0,n.zw)(t.paid_until),1)],8,L)))),128))])]),s.update||s.extend?((0,a.wg)(),(0,a.iD)("div",P,[s.update?((0,a.wg)(),(0,a.iD)("p",x,W)):(0,a.kq)("",!0),s.extend?((0,a.wg)(),(0,a.iD)("p",Z,Y)):(0,a.kq)("",!0),j,(0,a._)("button",{class:"button is-primary is-outlined",onClick:e[0]||(e[0]=(...t)=>i.refreshPayments&&i.refreshPayments(...t))},[(0,a._)("span",M,[(0,a.Wm)(d,{type:"mdi",path:i.refreshIcon},{default:(0,a.w5)((()=>[T])),_:1},8,["path"])]),F])])):(0,a.kq)("",!0)])],2)])}var K=s(2273),N=s(5317),G={name:"ContractList",components:{BaseSpinner:p.Z,BaseModal:g.Z,SvgIcon:K.Z},computed:{refreshIcon(){return N.jcD}},data(){return{isLoading:!1,error:null,success:!1,details:{show:!1,id:null,reg:null,model:null,inspectionRate:0,inspectionRefund:!1,ac_intact:!0,repairRefund:!1}}},props:{title:{type:String,required:!0},update:{type:Boolean,required:!1,default:!1},extend:{type:Boolean,required:!1,default:!1},contracts:{type:Array,required:!0},classes:{type:String,required:!1,default:""}},methods:{handleError(){this.error=null},handleSuccess(){this.success=!1},handleDetails(){this.details.show=!1},showDetails(t){const e=this.contracts.find((e=>e.id===t));e&&(this.details.id=e.id,this.details.reg=e.ac_reg,this.details.model=e.ac_type,this.details.inspectionRate=e.inspection_prorate,this.details.inspectionRefund=e.inspection_refund,this.details.ac_intact=e.ac_intact,this.details.repairRefund=e.repair_refund,this.details.show=!0)},async refreshPayments(){this.isLoading=!0;try{await this.$store.dispatch("contracts/refreshPayments"),this.success=!0}catch(t){this.error=t.message||"Could not refresh payment data"}this.isLoading=!1}}},J=s(3744);const O=(0,J.Z)(G,[["render",H]]);var Q=O,V={name:"UserContracts",components:{BaseSpinner:p.Z,BaseModal:g.Z,ContractList:Q},computed:{hasContracts(){return this.$store.getters["contracts/hasContracts"]},contracts(){return this.$store.getters["contracts/contracts"]},hasPendingContracts(){return this.$store.getters["contracts/hasPendingContracts"]},hasActiveContracts(){return this.$store.getters["contracts/hasActiveContracts"]},hasClosedContracts(){return this.$store.getters["contracts/hasClosedContracts"]},pendingContracts(){return this.$store.getters["contracts/pendingContracts"]},activeContracts(){return this.$store.getters["contracts/activeContracts"]},closedContracts(){return this.$store.getters["contracts/closedContracts"]}},data(){return{isLoading:!1,error:null}},methods:{async loadContracts(t=!1){this.isLoading=!0;try{await this.$store.dispatch("contracts/loadContracts",{forceRefresh:t})}catch(e){this.error=e.message||"Could not load contract data"}this.isLoading=!1},handleError(){this.error=null}},created(){this.loadContracts(!1)}};const X=(0,J.Z)(V,[["render",h]]);var tt=X}}]);
//# sourceMappingURL=785.5ecee0dd.js.map